/*! tabular 2016-12-28 */
var tabular=window.tabular={};tabular.Loader=function(a,b){this._element=a,this._options=b,this._init()},tabular.Loader.prototype={destroy:function(){this._element.off("model:startFetch model:stopFetch")},_init:function(){this._loader=$("<div/>").addClass("tabular-loader").text("Loading ...").appendTo(this._element),this._bind()},_bind:function(){this._element.on("model:startFetch",$.proxy(this,"_start")),this._element.on("model:stopFetch",$.proxy(this,"_stop"))},_start:function(){this._loader.show()},_stop:function(){this._loader.hide()}},$.extend(tabular,{start:function(a,b){var c=$(a);new tabular.View(c,b);return c}}),tabular.View=function(a,b){return this._element=a,this._options=b,this._init(),this._element},tabular.View.prototype={_init:function(){this._bind(),this._setup(),this._element.trigger("model:fetch")},_setup:function(){this._element.addClass("tabular"),this._table=$("<table/>").appendTo(this._element),this._addHeading(),this._addBody()},_addHeading:function(){if(this._options.addHeading)return void this._options.addHeading(this._element,this._table,this._options);var a=$.map(this._options.columns,function(a){return"<th>"+a.title+"</th>"});this._table.append("<thead><tr>"+a.join("")+"</th></thead>")},_addBody:function(){this._tbody=$("<tbody/>").appendTo(this._table)},_render:function(a,b){this._tbody.html($.map(b.data,$.proxy(this,"_processRow")))},_processRow:function(a){var b=$.map(this._options.columns,function(b){return"<td>"+a[b.name]+"</td>"});return"<tr>"+b.join("")+"</tr>"},_bind:function(){this._element.on("model:success",$.proxy(this,"_render"))}};